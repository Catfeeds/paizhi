<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="address=no" />
    <title>宝宝课程</title>
    <link rel="stylesheet" href="__STATIC__/css/index.css" />
    <link rel="stylesheet" href="__STATIC__/css/common.css">
    <link rel="stylesheet" href="__STATIC__/css/reset.css" />
    <link rel="stylesheet" href="__STATIC__/css/swiper-3.4.2.min.css">
    <script type="text/javascript" src="__STATIC__/js/jquerys-1.7.2.min.js"></script>
    <script type="text/javascript" src="__STATIC__/js/rem.js"></script>
    <script type="text/javascript" src="__STATIC__/js/swiper-3.4.2.jquery.min.js"></script>
	<script src="__STATIC__/js/jsbridge.js"></script>
	
</head>
<body>
<div id="wrap" style="padding: 0;background: #f0f0f0;min-height:95vh">
    <header class="header  header-fixed">
        <a  class="back"></a>宝宝课程
    </header>
    <div id="rightPart2" class="box rightPart2" style="margin-top: 0.54rem;">
	{if condition="$type eq 1"}
	<div class="kindergarten-leader">
    		<div class="select">请选择查看班级<div class="select-img"><img src="__STATIC__/img/back.png"width="100%"/></div></div>
    		<ul class="option display">
			{volist name="classManagement" id="vo"}
    			<li>
    				{$vo.class}
    				<ul class="optionCh display">
					{volist name="vo.className" id="vo1"}
    					<li><a href="{:url('classroom/index')}?className={$vo.class}{$vo1.className}&account={$account}&type={$type}">{$vo.class}{$vo1.className}班</a></li>
    					
					{/volist}
    				</ul>
    			</li>
			{/volist}
    			
    		</ul>
    	</div>
        {/if}
		<div class="schedule1">
			<div id="calendar" class="dateShow">
				<table id="dayshow" class="dates">
					<tr class="riqi">
						<th class="tl" colspan="2"><button id="last-week" class="lastW" title="上一周">上一周</button></th>
						<th id="curday" style="color:#333;font-weight: bold !important;" colspan="3"></th>
						<th class="tr" colspan="2"><button id="next-week" class="nextW" title="下一周">下一周</button></th>
					</tr>
					<tr id="monitor">
						<td><div class="<?php if(!empty($riqi['0'])){?>button-bg2 <?php } ?>"><button >日<br/><i></i></button></div></td>
						<td><div class="<?php if(!empty($riqi['1'])){?>button-bg2 <?php } ?>"><button >一<br/><i></i></button></div></td>
                        <td><div class="<?php if(!empty($riqi['2'])){?>button-bg2 <?php } ?>"><button >二<br/><i></i></button></div></td>
                        <td><div class="<?php if(!empty($riqi['3'])){?>button-bg2 <?php } ?>"><button >三<br/><i></i></button></div></td>
                        <td><div class="<?php if(!empty($riqi['4'])){?>button-bg2 <?php } ?>"><button  >四<br/><i></i></button></div></td>
                        <td><div class="<?php if(!empty($riqi['5'])){?>button-bg2 <?php } ?>"><button >五<br/><i></i></button></div></td>
                        <td><div class="<?php if(!empty($riqi['6'])){?>button-bg2 <?php } ?>"><button  >六<br/><i></i></button></div></td>
					</tr>
				</table>
			</div>
		</div>
		<div id="ranking-item-container1" class="swiper-container" >
		    <div class="swiper-wrapper">
			     
				{volist name="data" id="vo" key="k"}
			
			    <div class="swiper-slide ">
			        <div class="content-slide">
					{if condition="empty($vo)"}
				        <div class="default-class">
				        	<div><img src="__STATIC__/img/defult-class.png"/></div>
				        	<p>暂无课时</p>
				        </div>
					{else/}
				        <div class="main-food-family">
							<a href="/index/starlist/index?date={$weekDate[$k-1]}&account={$account}" class="fr" style="background: #33cc99;text-align:center;display: block;height: 0.4rem;color: #fff;line-height: 0.4rem;width: 25%;border-radius:5em ;">
						今日表现</a>
							<dl>
							   
								<dt class="dt-am">AM </dt> 
								{volist name="vo.morning" id="vo1"}
								<dd>{$vo1.name}</dd>
								{/volist}
								
								<dt class="dt-pm">PM</dt>
								{volist name="vo.afternoon" id="vo2"}
								<dd>{$vo2.name}</dd>
								{/volist}
							</dl>
							<div class="main-class">
						        <ul class="row main-class-ul">
								{volist name="vo.classroomImages" id="vo3"}
						            <li class="col-xs-4">
						                <a >
						                	<img src="{$vo3.1}" class="js-img"/>
											<input type="hidden" class="js-image" value="{$vo3.0}">
						                </a>
						            </li>
								{/volist}
						            
						        </ul>
						    </div>
						    
							<p class="zan-pass">
							{volist name="vo.zanname" id="vo3"}
								<span>
									<i>{$vo3}</i>
								</span>
							{/volist}
							</p>
							{if condition="$vo.iszan eq '' "}
							<a href="javascript:" class="click-zan" style="margin:0.1rem 50%;">
							   <input type="hidden" name="cid" value="{$vo.id}" class="cid">
							</a>
							{else/}
							<a href="javascript:" class="click-zan click-zan-red" style="margin:0.1rem 50%;">
							    <input type="hidden" name="cid" value="{$vo.id}" class="cid">
							</a>
							{/if}
						</div>
					{/if}
						
						

			        </div>
			      </div>
				
				{/volist}
			   <input type="hidden" name="schoolAccount" value="{$schoolAccount}">
			   <input type="hidden" name="className" value="{$className}">
               <input type="hidden" name="phone_account" value="{$phone_account}">
		       <input type="hidden" name="account" value="{$account}">
			   <input type="hidden" name="type" value="{$type}">
			</div>
		</div>
		
	</div>
</div>
<script type="text/javascript">
	$(function() {
		var jsButton = $("#monitor button")
		var rankingSwiper = new Swiper('#ranking-item-container1', {
			speed: 500,
			on: {
				slideChangeTransitionStart: function() {
					$("#monitor .mark1").removeClass('mark1');
					jsButton.eq(this.activeIndex).addClass('mark1');
				},
			},
		})
		$("#monitor td").on('click', function(e) {
			e.preventDefault()
			$("#monitor .mark1").removeClass('mark1')
			$(this).find('button').addClass('mark1')
			rankingSwiper.slideTo($(this).index())
		})
		
		// 首先调用JSBridge初始化代码，完成后再设置其他
        initJsBridge(function () {
		
			
			 $(document).on('click','.js-img',function(){
			 
				var index = $(this).parents('.col-xs-4').index();
				var length = $(this).parents('.main-class-ul').find('li').length;
			//alert(index);
			    var str = '';
				//var images = new Array();
				for(var i=0;i<length;i++){
					//images[i]=$(this).parents('.main-class').find('.js-image').eq(i).val();
				str +=$(this).parents('.main-class').find('.js-image').eq(i).val()+",";
				}
			    str += index;
			   // console.log(images);
			    window.WebViewJavascriptBridge.callHandler('get',str, function (response) {
					   // showResponse(response);
						});

		
		    })
			
			$(".back").click(function(){
				window.WebViewJavascriptBridge.callHandler('back','1', function (response) {
				
					 //showResponse(response);
		        });
	        })	
          
        })
		

		
	})
</script>

<script src="__STATIC__/js/date-class.js"></script> 
<script src="__STATIC__/js/yuanzhang.js"></script>
<script type="text/javascript">
$(function(){
		var jsButton = $("#monitor button")
		var ii = $("#monitor td button i")
		var yearMouth = $('#curday').html();
		var _year = parseInt(yearMouth.substring(0, 4));
		var _mouth = parseInt(yearMouth.substring(5));
		var mouth = yearMouth.substring(5,7);
		for(j = 0; j < 7; j++){
			var _day = parseInt(ii.eq(j).html());
			if (_day < 10) {
				day = '0' + _day;
			} else {
				day = _day;
			}
			for (i = 0; i < 7; i++) {
				var iiEq = parseInt(ii.eq(6).html())
				if (_day <= iiEq) {
					if (_mouth < 10) {
						var date = _year + "-0" + _mouth + "-" + day;
					} else {
						var date = _year + "-" + _mouth + "-" + day;
					}
				} else {
					var d = _mouth - 1;
					if (d != 0) {
						if (_mouth < 10) {
							var date = _year + "-0" + d + "-" + day;
						} else {
							var date = _year + "-" + d + "-" + day;
						}
					}else{
						var date = (_year - 1) + "-" + "12" + "-" + day;
					}
				}
			}
			//console.log(date)
			
		}
		
		
		
		$('.click-zan').click(function(){
                var cid = $(this).find('.cid').val();
				//alert(cid);
                var type = $(" input[ name='type' ] ").val();
				var phone_account = $(" input[ name='phone_account' ] ").val();
				var account = $(" input[ name='account' ] ").val();
                if($(this).hasClass('click-zan-red')){
			
                    $(this).removeClass('click-zan-red');
                }else{
                    $(this).addClass('click-zan-red')
                }
                $.ajax({
                url:'{:url("classroom/zan")}',
                type:'post',
                data:{cid:cid,phone_account:phone_account,account:account,type:type},
                dataType:'json',
                success:function(d){
             
                    $(".zan-pass").html(d);
                }

                })
            })
	})	
</script>

</body>
</html>